<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第一讲 文本检索和数据库检索 | 推荐系统开发文档</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/nomoe/favicon.ico">
    <meta name="description" content="News Demo Doc">
    
    <link rel="preload" href="/nomoe/assets/css/0.styles.46c87d11.css" as="style"><link rel="preload" href="/nomoe/assets/js/app.b0634cdc.js" as="script"><link rel="preload" href="/nomoe/assets/js/2.e531c252.js" as="script"><link rel="preload" href="/nomoe/assets/js/8.f6d4234c.js" as="script"><link rel="prefetch" href="/nomoe/assets/js/10.f8c2e7ab.js"><link rel="prefetch" href="/nomoe/assets/js/11.a72faa70.js"><link rel="prefetch" href="/nomoe/assets/js/12.2932e2a5.js"><link rel="prefetch" href="/nomoe/assets/js/13.680ff2e4.js"><link rel="prefetch" href="/nomoe/assets/js/14.e1056133.js"><link rel="prefetch" href="/nomoe/assets/js/15.14c6f790.js"><link rel="prefetch" href="/nomoe/assets/js/16.feab6203.js"><link rel="prefetch" href="/nomoe/assets/js/17.da74545f.js"><link rel="prefetch" href="/nomoe/assets/js/18.dfbc94c1.js"><link rel="prefetch" href="/nomoe/assets/js/19.5e254fde.js"><link rel="prefetch" href="/nomoe/assets/js/20.f8be3a04.js"><link rel="prefetch" href="/nomoe/assets/js/21.83956418.js"><link rel="prefetch" href="/nomoe/assets/js/22.d0011416.js"><link rel="prefetch" href="/nomoe/assets/js/23.e1c4e5da.js"><link rel="prefetch" href="/nomoe/assets/js/24.52c6dafe.js"><link rel="prefetch" href="/nomoe/assets/js/25.544fbff6.js"><link rel="prefetch" href="/nomoe/assets/js/26.5fd376d5.js"><link rel="prefetch" href="/nomoe/assets/js/27.4a83da68.js"><link rel="prefetch" href="/nomoe/assets/js/3.b79a0801.js"><link rel="prefetch" href="/nomoe/assets/js/4.21c265ed.js"><link rel="prefetch" href="/nomoe/assets/js/5.67bfa7f8.js"><link rel="prefetch" href="/nomoe/assets/js/6.c01f87cc.js"><link rel="prefetch" href="/nomoe/assets/js/7.ea71c5c9.js"><link rel="prefetch" href="/nomoe/assets/js/9.906cc110.js">
    <link rel="stylesheet" href="/nomoe/assets/css/0.styles.46c87d11.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/nomoe/" class="home-link router-link-active"><img src="/nomoe/logo.gif" alt="推荐系统开发文档" class="logo"> <span class="site-name can-hide">推荐系统开发文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/nomoe/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="推荐系统开发" class="dropdown-title"><span class="title">推荐系统开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="推荐系统开发" class="mobile-dropdown-title"><span class="title">推荐系统开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/nomoe/develop/01/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  第一讲
</a></li><li class="dropdown-item"><!----> <a href="/nomoe/develop/02/" class="nav-link">
  第二讲
</a></li><li class="dropdown-item"><!----> <a href="/nomoe/develop/03/" class="nav-link">
  第三讲
</a></li><li class="dropdown-item"><!----> <a href="/nomoe/develop/04/" class="nav-link">
  第四讲
</a></li><li class="dropdown-item"><!----> <a href="/nomoe/develop/05/" class="nav-link">
  第五讲
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/nomoe/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="推荐系统开发" class="dropdown-title"><span class="title">推荐系统开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="推荐系统开发" class="mobile-dropdown-title"><span class="title">推荐系统开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/nomoe/develop/01/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  第一讲
</a></li><li class="dropdown-item"><!----> <a href="/nomoe/develop/02/" class="nav-link">
  第二讲
</a></li><li class="dropdown-item"><!----> <a href="/nomoe/develop/03/" class="nav-link">
  第三讲
</a></li><li class="dropdown-item"><!----> <a href="/nomoe/develop/04/" class="nav-link">
  第四讲
</a></li><li class="dropdown-item"><!----> <a href="/nomoe/develop/05/" class="nav-link">
  第五讲
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/nomoe/develop/01/" aria-current="page" class="active sidebar-link">第一讲 文本检索和数据库检索</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#介绍-重要" class="sidebar-link">介绍（重要！！！）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#总流程" class="sidebar-link">总流程</a></li><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#配套资料链接" class="sidebar-link">配套资料链接</a></li><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#适合的人群" class="sidebar-link">适合的人群</a></li></ul></li><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#涉及的知识" class="sidebar-link">涉及的知识</a></li><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#一、环境建议" class="sidebar-link">一、环境建议：</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#_1、我建议的环境-汇总" class="sidebar-link">1、我建议的环境（汇总）：</a></li><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#_2、我的环境" class="sidebar-link">2、我的环境</a></li><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#_3、新闻数据集" class="sidebar-link">3、新闻数据集</a></li><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#_4、新闻数据集文件" class="sidebar-link">4、新闻数据集文件</a></li><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#_5、新闻数据集数据的xml格式" class="sidebar-link">5、新闻数据集数据的xml格式</a></li></ul></li><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#二、前序准备" class="sidebar-link">二、前序准备：</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#_1、在-mysql-中建立数据库-news-demo" class="sidebar-link">1、在 MySQL 中建立数据库 news_demo</a></li><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#_2、建立数据表-article" class="sidebar-link">2、建立数据表 article</a></li><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#_3、在idea创建项目" class="sidebar-link">3、在IDEA创建项目</a></li></ul></li><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#三、编写插入新闻数据" class="sidebar-link">三、编写插入新闻数据</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#_1、编写业务逻辑" class="sidebar-link">1、编写业务逻辑</a></li><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#_2、完整代码" class="sidebar-link">2、完整代码</a></li><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#_3、运行结果" class="sidebar-link">3、运行结果</a></li></ul></li><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#四、编写检索实验-根据关键词检索相关新闻" class="sidebar-link">四、编写检索实验（根据关键词检索相关新闻）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#main方法编写大体逻辑" class="sidebar-link">main方法编写大体逻辑</a></li><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#_1、测试在数据库中查找" class="sidebar-link">1、测试在数据库中查找</a></li><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#_2、测试在文件中查找" class="sidebar-link">2、测试在文件中查找</a></li><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#_3、测试结果" class="sidebar-link">3、测试结果</a></li></ul></li><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#五、目录结构" class="sidebar-link">五、目录结构</a></li><li class="sidebar-sub-header"><a href="/nomoe/develop/01/#六、源码参考注意事项" class="sidebar-link">六、源码参考注意事项</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="第一讲-文本检索和数据库检索"><a href="#第一讲-文本检索和数据库检索" class="header-anchor">#</a> 第一讲 文本检索和数据库检索</h1> <hr> <h2 id="介绍-重要"><a href="#介绍-重要" class="header-anchor">#</a> 介绍（重要！！！）</h2> <p>大家好，我是Jack，这次给大家带来这套新闻推荐系统手把手教程，用于辅助新闻推荐系统课程的学习和开发，本教程的路线基于新闻推荐系统课程提供的文档，当然啦，文档我也会准备给大家，大家一步步跟着学习即可，希望大家能有所收获😊~ 当然由于我精力有限，如果有任何不完美或者疏漏的地方请多多包涵~</p> <h3 id="总流程"><a href="#总流程" class="header-anchor">#</a> 总流程</h3> <p><img src="https://img-blog.csdnimg.cn/e92d385bd14d485ca5039e9f4cbf41de.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2NDkxNTQ5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> <h3 id="配套资料链接"><a href="#配套资料链接" class="header-anchor">#</a> 配套资料链接</h3> <p>请务必先阅读文档，再来看以下教程！！！每一讲对应一篇文档的任务。
PS：第五讲对应 &gt;  <code>信息检索与推荐 讲义06 推荐系统简介 v6.2（主要）.pdf</code></p> <p>文档链接：
<a href="https://download.csdn.net/download/m0_46491549/20719642" target="_blank" rel="noopener noreferrer">https://download.csdn.net/download/m0_46491549/20719642<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>源码链接：
<a href="https://download.csdn.net/download/m0_46491549/20722111" target="_blank" rel="noopener noreferrer">https://download.csdn.net/download/m0_46491549/20722111<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="适合的人群"><a href="#适合的人群" class="header-anchor">#</a> 适合的人群</h3> <p>具有一定Java基础和一定前端基础，想完成新闻推荐课程（假设你们有开设）的童鞋，大神请绕道~</p> <h2 id="涉及的知识"><a href="#涉及的知识" class="header-anchor">#</a> 涉及的知识</h2> <p>后端知识：</p> <ul><li>基础：<code>Java SE</code>，<code>Java Web</code></li> <li>进阶：<code>Springboot</code>，<code>Mybatis</code></li></ul> <p>前端知识：</p> <ul><li>基础：<code>Html</code>，<code>CSS</code>，<code>JavaScript</code>，<code>jQuery</code>，<code>Ajax</code></li> <li>进阶：<code>Webpack</code>（了解），<code>Vue</code>（会用），<code>less</code>（会用）</li></ul> <p>必须会的：</p> <ul><li>前四讲
<ul><li>后端：<code>Java SE</code>，<code>Java Web</code></li> <li>前端：<code>Html</code>，<code>CSS</code>，<code>JavaScript</code>，<code>jQuery</code>，<code>Ajax</code>；<code>vue</code> 可以不会</li></ul></li> <li>第五讲开始
<ul><li>后端：<code>Springboot</code>，<code>Mybatis</code></li> <li>前端：<code>Vue</code>、<code>scss/sass</code> 或者 <code>less</code></li></ul></li></ul> <p>其他：</p> <ul><li>前后端分离的交互模式</li> <li>浏览器跨域原理以及解决方式等</li></ul> <p>由于考虑到大家可能有的同学前端不会 <code>Vue</code> 技术，有的同学前端 <code>Vue</code> 已经很牛逼，因此本次教程我分好几种前端开发模式，分别有<code>jQuery</code> 版、<code>vue</code> 基础版和 <code>vue</code> 高阶版，带大家一起开发~ 后端也从基础的 <code>JavaWeb</code> （前四章）过渡到 <code>Springboot</code>（最后一章），还不会 <code>Springboot</code> 的童鞋抓紧学习啦~</p> <h2 id="一、环境建议"><a href="#一、环境建议" class="header-anchor">#</a> 一、环境建议：</h2> <h3 id="_1、我建议的环境-汇总"><a href="#_1、我建议的环境-汇总" class="header-anchor">#</a> 1、我建议的环境（汇总）：</h3> <h4 id="_1、后端环境-推荐"><a href="#_1、后端环境-推荐" class="header-anchor">#</a> 1、后端环境（推荐）</h4> <ul><li><p>Java环境：<code>jdk1.8</code> 较新版本</p> <ul><li>历史版本：<a href="https://www.oracle.com/java/technologies/javase/javase8-archive-downloads.html" target="_blank" rel="noopener noreferrer">https://www.oracle.com/java/technologies/javase/javase8-archive-downloads.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>（需要登录Oracle账号才能下载，可自行注册）</li></ul></li> <li><p>数据库环境：<code>MySQL5.7</code> 任意版本，强烈推荐使用集成环境 <code>Phpstudy 64位</code> 里的 <code>MySQL</code> ，傻瓜上手，或者官方版 <code>MySQL</code>，<strong>推荐数据库安装在固态硬盘</strong>，但是如果固态硬盘是系统盘且容量较小的话就不必了</p> <ul><li><p>PhpStudy：<a href="http://public.xp.cn/upgrades/phpStudy_64.zip" target="_blank" rel="noopener noreferrer">http://public.xp.cn/upgrades/phpStudy_64.zip<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>MySQL5.7原版：安装版：<a href="https://downloads.mysql.com/archives/installer/" target="_blank" rel="noopener noreferrer">https://downloads.mysql.com/archives/installer/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>​						   压缩版： <a href="https://downloads.mysql.com/archives/community/" target="_blank" rel="noopener noreferrer">https://downloads.mysql.com/archives/community/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul></li> <li><p>开发环境：推荐使用 <code>Intellij IDEA 2021</code> 以上版本，最好是最新版内的几个版本，最次也要2019以上；推荐使用 <a href="https://www.jetbrains.com/toolbox-app/" target="_blank" rel="noopener noreferrer">Toolbox APP<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 管理 <code>Jetbrains</code> 系列软件</p> <p><a href="https://www.jetbrains.com/zh-cn/idea/download/" target="_blank" rel="noopener noreferrer">https://www.jetbrains.com/zh-cn/idea/download/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>数据库软件：<code>Navicat 15</code>（推荐）、<code>DataGrip 2021</code>（占用内存较多）或者 <code>IDEA</code> 内置数据库插件（备用）</p></li></ul> <h4 id="_2、前端环境-推荐"><a href="#_2、前端环境-推荐" class="header-anchor">#</a> 2、前端环境（推荐）</h4> <ul><li><p><code>NodeJs</code> 环境：较新版即可，用于安装 <code>vue</code> 脚手架环境</p></li> <li><p>开发环境：<code>VS Code</code> 或者 <code>Webstorm 2021.2</code> 以上，为什么要加 <code>.2</code>，因为 <code>Webstorm 2021.2</code> 以及之后的版本更新页面会自动刷新浏览器，相当于VS Code的 <code>Live Server</code>。如果不想多装软件，使用 <code>IDEA</code> 也行，因为 <code>IDEA</code> 拥有 <code>Webstorm</code> 的全部功能</p> <img src="https://img-blog.csdnimg.cn/ea3c361f637e4ea49e9863448486b523.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2NDkxNTQ5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" style="zoom:80%;"></li> <li><p>浏览器插件：能格式化 <code>JSON</code> 代码的插件（比如FeHelper），<code>Vue</code> 官方插件（用于调试 <code>Vue</code> 项目）</p></li></ul> <h4 id="_3、其他"><a href="#_3、其他" class="header-anchor">#</a> 3、其他</h4> <ul><li><p>接口调试：<code>Postman</code> 或者 <code>ApiPost</code>（国产），推荐后者，中文界面，和 <code>Postman</code> 功能很相似，而且具有帐号同步功能</p></li> <li><p>听歌：网抑云，边听歌边敲代码，快乐编程~</p> <img src="https://img-blog.csdnimg.cn/5896a1a97b7244b69fb6fe6e1e601033.jpg" alt="在这里插入图片描述" style="zoom:80%;"></li></ul> <h3 id="_2、我的环境"><a href="#_2、我的环境" class="header-anchor">#</a> 2、我的环境</h3> <h4 id="_1、后端环境"><a href="#_1、后端环境" class="header-anchor">#</a> 1、后端环境</h4> <ul><li>Java环境：<code>jdk1.8.0_192</code></li> <li>数据库环境：<code>PHPStudy</code> 集成环境的 <code>MySQL5.7.26</code> （<code>5.7.26</code> 插入数据的速度相比 <code>8.0</code> 会快一点）</li> <li>开发环境：<code>Intellij IDEA 2021.2</code></li> <li>数据库软件：<code>Navicat 15</code>  + <code>IDEA</code> 内置数据库插件</li></ul> <h4 id="_2、前端环境"><a href="#_2、前端环境" class="header-anchor">#</a> 2、前端环境</h4> <ul><li><code>Node.Js</code> 环境：<code>v16.5.0</code></li> <li>开发环境： <code>Webstorm 2021.2</code>，偶尔用 <code>VS Code</code></li> <li>浏览器插件：<code>CSDN</code> 插件，<code>Vue</code> 官方插件</li></ul> <h4 id="_3、机器"><a href="#_3、机器" class="header-anchor">#</a> 3、机器</h4> <ul><li>处理器：Intel酷睿八代 <code>i7</code></li> <li>内存：<code>16GB DDR4 2400Mhz</code></li> <li>磁盘：系统盘固态，数据盘机械，数据库装在机械盘上，原因是要以比较低的上限测试数据插入的性能</li></ul> <h3 id="_3、新闻数据集"><a href="#_3、新闻数据集" class="header-anchor">#</a> 3、新闻数据集</h3> <p>来自搜狐新闻网站 2012 年 6 月—7 月期间国内，国际，体育，社会，娱乐等 18 个频道的新闻数据，提供 URL 和正文信息，共 129 万条记录。</p> <h3 id="_4、新闻数据集文件"><a href="#_4、新闻数据集文件" class="header-anchor">#</a> 4、新闻数据集文件</h3> <p><code>news_origin_data.dat</code>（<code>1.43G</code>） 新闻原始数据
<code>news_handled_data.dat</code>（<code>1.43G</code>） 处理后的新闻数据（这里只是为了提供参考，后面会编码生成该文件）</p> <p>阿里云盘：<a href="https://www.aliyundrive.com/s/4T4DJXLpHkR" target="_blank" rel="noopener noreferrer">https://www.aliyundrive.com/s/4T4DJXLpHkR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="_5、新闻数据集数据的xml格式"><a href="#_5、新闻数据集数据的xml格式" class="header-anchor">#</a> 5、新闻数据集数据的xml格式</h3> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>doc</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>页面 URL<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>docno</span><span class="token punctuation">&gt;</span></span>页面 ID<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>docno</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>contenttitle</span><span class="token punctuation">&gt;</span></span>页面标题<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>contenttitle</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>content</span><span class="token punctuation">&gt;</span></span>页面内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>content</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>doc</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="二、前序准备"><a href="#二、前序准备" class="header-anchor">#</a> 二、前序准备：</h2> <h3 id="_1、在-mysql-中建立数据库-news-demo"><a href="#_1、在-mysql-中建立数据库-news-demo" class="header-anchor">#</a> 1、在 <code>MySQL</code> 中建立数据库 <code>news_demo</code></h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token punctuation">`</span>news_demo<span class="token punctuation">`</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2、建立数据表-article"><a href="#_2、建立数据表-article" class="header-anchor">#</a> 2、建立数据表 <code>article</code></h3> <table><thead><tr><th>序号/说明</th> <th>列名</th> <th>数据类型</th> <th>说明</th></tr></thead> <tbody><tr><td>1</td> <td>id</td> <td>bigint</td> <td>自动增长主键</td></tr> <tr><td>2</td> <td>url</td> <td>varchar(500)</td> <td>链接网址</td></tr> <tr><td>3</td> <td>docno</td> <td>varchar(50)</td> <td>文档编号</td></tr> <tr><td>4</td> <td>title</td> <td>varchar(50)</td> <td>文章标题</td></tr> <tr><td>5</td> <td>content</td> <td>text</td> <td>文章内容</td></tr></tbody></table> <p><strong>说明</strong>：数据表名、字段名一般全部小写，多个单词用下划线连接。具体要求请参考 Java代码规范标准《阿里巴巴 Java 开发手册》一书。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>article<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">COMMENT</span> <span class="token string">'自动增长主键'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>url<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'链接网址'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>docno<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'文档编号'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>title<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'文章标题'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>content<span class="token punctuation">`</span> <span class="token keyword">text</span> <span class="token keyword">COMMENT</span> <span class="token string">'文章内容'</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span>MyISAM <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>注意：此处表引擎建议设置为 <code>MyISAM</code>，相对于 <code>Innodb</code> 来说可大幅提高新闻插入速度，不懂得什么是表引擎的自己百度~</p></blockquote> <h3 id="_3、在idea创建项目"><a href="#_3、在idea创建项目" class="header-anchor">#</a> 3、在IDEA创建项目</h3> <ol><li><p>新建一个Java普通项目，<strong>选择项目SDK</strong>，以及 <code>MySQL</code> 支持（选了IDEA会支持 <code>MySQL</code> 语法以及默认显示数据库工具，可以不选）
<img src="https://img-blog.csdnimg.cn/159c71d3fa064851b3656ab6ed8ecdc3.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2NDkxNTQ5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" style="zoom:80%;"></p></li> <li><p>命名项目，选择项目位置</p> <img src="https://img-blog.csdnimg.cn/38f49f05341e4af8924473393008ef2d.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2NDkxNTQ5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" style="zoom:80%;"></li> <li><p>在根目录下新建项目包 <code>com.example.demo</code> ，在报下新建lib目录作为项目的外部库目录，导入 <code>MySQL</code>数据库驱动jar包 <code>mysql-connector-java-5.1.47.jar</code>（8.0版导入 <code>mysql-connector-java-8.0.21.jar</code>），然后右键对lib目录 -&gt; <code>Add as Library</code> <img src="https://img-blog.csdnimg.cn/a449f4a8f96a4a11b61f5a5ed6dba754.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2NDkxNTQ5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" style="zoom:80%;">
项目包下新建 <code>utils</code> 包存放工具类，新建 <code>DatabaseUtil</code> 工具类，处理数据库连接，这里采用配置文件properties的方式配置数据库，而不是直接写死在代码里，便于维护和修改，当然啦，配置文件要放在项目包下的resources目录，因为我代码里就是那么写的，而且需要叫做db.properties</p></li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>utils</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">File</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileInputStream</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Objects</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 数据库连接工具类
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DatabaseUtil</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
     * 获得数据库的连接
     *
     * @return 数据库的连接
     */</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

    <span class="token comment">// 获取绝对路径</span>
    <span class="token class-name">String</span> absolutePath <span class="token operator">=</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span><span class="token class-name">DatabaseUtil</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    absolutePath <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>absolutePath<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 配置文件绝对路径</span>
    <span class="token class-name">String</span> filepath <span class="token operator">=</span> absolutePath <span class="token operator">+</span> <span class="token string">&quot;/resources/db.properties&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// 读取配置文件</span>
    <span class="token class-name">FileInputStream</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 解析配置文件</span>
    <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
    in<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 获取配置文件中数据库连接相应字段的值</span>
    <span class="token class-name">String</span> driver <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> url <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> username <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> password <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 获取数据库连接</span>
    <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>
      connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> connection<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
     * 关闭数据库连接
     *
     * @param resultSet   结果集
     * @param statement   sql执行器
     * @param connection 连接
     */</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token class-name">ResultSet</span> resultSet<span class="token punctuation">,</span> <span class="token class-name">Statement</span> statement<span class="token punctuation">,</span> <span class="token class-name">Connection</span> connection<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>resultSet <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>statement <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">// 测试数据库连接</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">DatabaseUtil</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br></div></div><p>项目包下新建 <code>resources</code> 包存放资源，新建数据连接配置文件 <code>db.properties</code> 文件，方便配置数据库连接信息</p> <p>5.7版（此处选用）</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token attr-name">driver</span><span class="token punctuation">=</span><span class="token attr-value">com.mysql.jdbc.Driver</span>
<span class="token attr-name">url</span><span class="token punctuation">=</span><span class="token attr-value">jdbc:mysql://localhost:3306/news_demo?characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=UTC</span>
<span class="token attr-name">username</span><span class="token punctuation">=</span><span class="token attr-value">root</span>
<span class="token attr-name">password</span><span class="token punctuation">=</span><span class="token attr-value">root</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>8.0版</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token attr-name">driver</span><span class="token punctuation">=</span><span class="token attr-value">com.mysql.cj.jdbc.Driver</span>
<span class="token attr-name">url</span><span class="token punctuation">=</span><span class="token attr-value">jdbc:mysql://localhost:3306/news_demo?characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=UTC</span>
<span class="token attr-name">username</span><span class="token punctuation">=</span><span class="token attr-value">root</span>
<span class="token attr-name">password</span><span class="token punctuation">=</span><span class="token attr-value">root</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>运行 <code>DatabaseUtil</code> 的 <code>main</code> 方法测试连接，成功</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>com.mysql.jdbc.JDBC4Connection@5ce65a89
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>新建 <code>main</code> 包作为编写代码的主要包，在 <code>main</code> 下新建新闻导入处理类 <code>HandleImportNews</code>，然后 <code>psvm</code> 快速生成 <code>main</code> 方法，编写一些打印我们的业务耗时信息的代码，把主要业务封装在 <code>handleImportNews</code> 方法里面</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>main</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 处理新闻数据导入到数据库
 */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
  <span class="token comment">// 计算开始时间</span>
  <span class="token keyword">long</span> startTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;开始计时...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// 在handleImportNews方法中编写逻辑</span>
  <span class="token function">handleImportNews</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// 打印耗时</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;插入完成，耗时&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> startTime<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;ms&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>到此，前序准备完成</p> <h2 id="三、编写插入新闻数据"><a href="#三、编写插入新闻数据" class="header-anchor">#</a> 三、编写插入新闻数据</h2> <h3 id="_1、编写业务逻辑"><a href="#_1、编写业务逻辑" class="header-anchor">#</a> 1、编写业务逻辑</h3> <ol><li>定义方法 <code>handleImportNews</code>，在里面编写我们的主要逻辑</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">handleImportNews</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
  <span class="token comment">// 主要业务逻辑</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="2"><li>获取文件读取缓冲流</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 传入新闻文件路径和编码格式，获取文件流</span>
<span class="token class-name">BufferedReader</span> br <span class="token operator">=</span> <span class="token function">getBufferReader</span><span class="token punctuation">(</span><span class="token string">&quot;F:\\news_data\\news_origin_data.dat&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gbk&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>​	将 <code>BufferedReader</code> 构造逻辑封装在 <code>getBufferReader</code> 方法里，由于这个方法以后我们还会用到，所以封装到一个工具类里面，在<code>utils</code> 包下新建 <code>FileUtil</code> 类，将方法剪切到里面</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">BufferedReader</span> <span class="token function">getBufferReader</span><span class="token punctuation">(</span><span class="token class-name">String</span> filePath<span class="token punctuation">,</span> <span class="token class-name">String</span> encoding<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>
      <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">,</span> encoding
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>​	同时补充一个回收资源的方法 <code>closeBufferReader</code></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">closeBufferReader</span><span class="token punctuation">(</span><span class="token class-name">BufferedReader</span> br<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>br <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      br<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ol start="3"><li>获取数据库连接和prepareStatement</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 获取数据库连接</span>
<span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DatabaseUtil</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">PreparedStatement</span> ps <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>注意：其实这里我们使用了prepareStatement，但是我们并不用prepareStatement的预编译，下面也会谈论为什么不用，不过我个人还是习惯用prepareStatement</p> <ol start="4"><li>定义插入语句的前缀和后缀</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 定义数据库插入语句前缀和后缀</span>
<span class="token class-name">String</span> sqlPrefix <span class="token operator">=</span> <span class="token string">&quot;insert into `article`(url, docno, title, content) values&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">StringBuilder</span> sqlSuffix <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>疑问：什么是插入语句前缀和后缀？为什么要定义插入语句的前缀和后缀？</strong> <strong>回答</strong>：我们采用一次插入多条数据的方式，<code>sql</code> 语句一般长这样 <code>insert into table(column1, column2...) values(value1, value2...), (value1, value2...), (value1, value2...)... ;</code>，
那么在这里：前缀指的是<code>insert into table(column_1, column_2...) values</code>，后缀指的是 <code>(value_1, value_2..., value_n)</code>，用于手动拼接 <code>sql</code>语句，主要是为了提高插入速度，我们自己手动拼接，虽然麻烦了点，但是速度杠杠滴~</p> <p>关于<code>MySQL</code> 提高插入速度的方式，下列这几种方式我们都会用到，这里提前做个知识准备，其中第三种方式是最重要的也是最有用的，本次教程我们会贯彻这种插入方法，请大家好好记住：</p> <ol><li><p>加大 <code>mysql</code> 配置中的 <code>bulk_insert_buffer_size</code> ，这个参数默认为 <code>8M</code>，推荐改到<code>100M</code></p> <p><code>bulk_insert_buffer_size=100M</code></p></li> <li><p>改写所有 <code>insert</code> 语句为 <code>insert delayed</code></p> <p>这个 <code>insert delayed</code> 不同之处在于：立即返回结果，后台进行处理插入。</p></li> <li><p>insert中插入多条数据，类似 <code>insert into tablename(column1, column2...) values('xxx','xxx'), ('yyy','yyy'), ('zzz','zzz')...;</code>
具体提高插入速度的方式大家可以网上了解</p></li></ol> <p><strong>疑问：手动拼接<code>sql</code>语句的方式对比 <code>PreparedStatement</code> 的占位符 <code>?</code> 预编译形式，哪个快？</strong></p> <p><strong>回答</strong>：形如 <code>insert into table(column1, column2...) values(value1, value2...), (value1, value2...), (value1, value2...)... ;</code> 的一次性插入多条数据的方式相比于多次执行 <code>insert into table(column1, column2...) values(value1, value2...);</code> 的速度要快很多，所以要想提高插入速度，就不能用 <code>PreparedStatement</code> 默认的占位符形式 <code>insert into table(column1, column2...) values(?, ?)</code>，因为采取这种方式，即使使用批处理，<code>PreparedStatement</code> 也是一条一条<code>insert</code>语句插入的，速度没有一次执行手动拼接的语句快，所以肯定是前者快。但是前者需要手动拼接，代码可读性可能会下降。</p> <ol start="5"><li><p>逐行读取，每6行进行一次判断</p> <p>5.1 定义变量</p></li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code>   <span class="token comment">// 行号</span>
   <span class="token keyword">int</span> lineNumber <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
   <span class="token comment">// 存放每篇新闻</span>
   <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> news <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token comment">// 存放每次读取的一行内容</span>
   <span class="token class-name">String</span> line <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>疑问：String[6] 为什么大小是 6？</strong></p> <p><strong>回答</strong>：因为新闻的源数据xml结构中，每六行为一篇文章，我们使用一个数组存放一篇文章，然后获取完一篇文章，也就是行号进行到模6为0时，进行一篇新闻的处理，此时要取每部分内容就根据下标取即可</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--news[0]:--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>doc</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--news[1]:--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>页面 URL<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--news[2]:--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>docno</span><span class="token punctuation">&gt;</span></span>页面 ID<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>docno</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--news[3]:--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>contenttitle</span><span class="token punctuation">&gt;</span></span>页面标题<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>contenttitle</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--news[4]:--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>content</span><span class="token punctuation">&gt;</span></span>页面内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>content</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--news[5]:--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>doc</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>​	5.2 循环遍历每一篇文章，每处理完1000篇执行一次插入数据库</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>   <span class="token comment">// 逐行扫描新闻</span>
   <span class="token keyword">while</span> <span class="token punctuation">(</span>line <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">// 赋值每篇新闻的对应行到临时的数组</span>
     news<span class="token punctuation">[</span>lineNumber<span class="token operator">++</span> <span class="token operator">%</span> <span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> line<span class="token punctuation">;</span>
   
     <span class="token comment">// 每六行即为一片新闻，进行一次判断</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>lineNumber <span class="token operator">%</span> <span class="token number">6</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">// 获取新闻标题和内容</span>
       <span class="token class-name">String</span> newsTitle <span class="token operator">=</span> <span class="token function">getContent</span><span class="token punctuation">(</span>news<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;contenttitle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">String</span> newsContent <span class="token operator">=</span> <span class="token function">getContent</span><span class="token punctuation">(</span>news<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token comment">// 新闻标题或内容都不为空或空格的新闻才是合格的新闻</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>newsTitle<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> newsContent<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token comment">// 获取新闻链接和文档编号</span>
         <span class="token class-name">String</span> newsUrl <span class="token operator">=</span> <span class="token function">getContent</span><span class="token punctuation">(</span>news<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">String</span> newsDocno <span class="token operator">=</span> <span class="token function">getContent</span><span class="token punctuation">(</span>news<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;docno&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token comment">// 生成和拼接后缀</span>
         sqlSuffix<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">generateSQLSuffix</span><span class="token punctuation">(</span>newsUrl<span class="token punctuation">,</span> newsDocno<span class="token punctuation">,</span> newsTitle<span class="token punctuation">,</span> newsContent<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token comment">// 每1000条</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>lineNumber <span class="token operator">%</span> <span class="token number">1000</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token comment">// 插入到数据库</span>
           <span class="token function">insertNews</span><span class="token punctuation">(</span>ps<span class="token punctuation">,</span> sqlPrefix<span class="token punctuation">,</span> sqlSuffix<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token comment">// 重新初始化后缀</span>
           sqlSuffix <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
       <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
   
     <span class="token comment">// 读取下一行</span>
     line <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p><strong>疑问：为什么下面</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 获取新闻链接和文档编号</span>
<span class="token class-name">String</span> newsUrl <span class="token operator">=</span> <span class="token function">getContent</span><span class="token punctuation">(</span>news<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> newsDocno <span class="token operator">=</span> <span class="token function">getContent</span><span class="token punctuation">(</span>news<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;docno&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>这部分内容不写if判断上面？</strong></p> <p><strong>回答</strong>：因为要先判断 新闻标题或内容是否都不为空或空格 ，如果写在if上面，则没有那么优雅，因为 新闻标题或内容为空或空格时 <code>if</code> 条件不成立，不会再走下去，这时候 <code>newsUrl</code> 和 <code>newsDocno</code> 的赋值就浪费了</p> <p><strong>疑问：每1000条可以改吗？</strong></p> <p><strong>回答</strong>：当然可以，这个值会影响一丢丢插入总耗时，根据多次尝试进行选择，大家可以自己多尝试，选择一个合适的值，但一般情况下这个值不宜太大也不宜太小，太大的话mysql的配置 <code>bulk_insert_buffer_size</code> 也要改大一点</p> <p><strong>疑问：这句代码 <code>news[lineNumber++ % 6] = line;</code> 怎么理解？</strong></p> <p><strong>回答</strong>：这句代码其实是这两句代码的组合：<code>news[lineNumber % 6] = line; lineNumber++;</code> 的组合写法而已</p> <p>5.3 细节完善，循环结束后剩余最后不足1000篇新闻也要插入，然后顺便回收一下资源</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 剩余不足1000条数据也要插入</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>sqlSuffix<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token function">insertNews</span><span class="token punctuation">(</span>ps<span class="token punctuation">,</span> sqlPrefix<span class="token punctuation">,</span> sqlSuffix<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 回收资源</span>
<span class="token class-name">DatabaseUtil</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> ps<span class="token punctuation">,</span> connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">closeBufferReader</span><span class="token punctuation">(</span>br<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="6"><li>代码涉及到的函数：</li></ol> <p><code>getContent</code>：获取xml标签里的内容，去除首尾空格，全角字符转半角字符，转义单引号 <code>'</code> 和 <code>\</code>（避免和插入语句的单引号冲突，如果用 <code>preparedStatement</code> 的占位符 ? 则会自动转义，但我们追求快速插入，不能用占位符形式，所以手动实现转义）</p> <p>例如 <code>insert into article(title) values('你好\\\'')</code> 执行后会在数据库插入 <code>你好\'</code>，由于后续还会有用到此方法的地方，所以在 <code>utils</code>包下新建一个类 <code>NewsUtil</code>，然后剪切此方法到 <code>NewsUtil</code> 类下</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token class-name">String</span> text<span class="token punctuation">,</span> <span class="token class-name">String</span> payload<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> payloadLength <span class="token operator">=</span> payload<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> content <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>payloadLength <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">,</span> text<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> payloadLength <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">toDbcCase</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token comment">// 全角符号转半角，''替换为空格</span>
    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;\\&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\\\\&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 转义反斜杠</span>
    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;'&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\\'&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 转义单引号</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>​	这里的 <code>payload</code> 翻译叫做载荷，其实就是我的意思是指 <code>xml</code> 标签的名而已，只不过我一时不知如何命名，就起了这个，大家在编码过程中尽量用可读性高的英文，不会就找翻译</p> <img src="https://img-blog.csdnimg.cn/cd68a28e9ecb4fb8bed08a02f0b3fdb8.jpg" alt="在这里插入图片描述" style="zoom:33%;"> <p>​	关于 <code>StringUtil.toDbcCase</code>方法：</p> <p>​	由于原来新闻的字符都是全角字符，包括英文的字母数字标点，但在我们的日常生活中，这些字符习惯用半角的，关于全角半角的区别，其实从视觉效果上很容易体现，一个全角字符的位置可以放两个半角字符，但根本上，其实就是占用字节数的区别，全角占用两个字节，半角占用一个字节</p> <blockquote><p>全角数字：</p> <p>１２３４５６７８９０</p> <p>半角数字</p> <p>1234567890</p></blockquote> <p>所以，我们要转换，这里提供了一个转换函数，我把它定义在 <code>StringUtil</code> 这个工具类里面，所以在 <code>utils</code> 包下新建<code>StringUtil</code></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StringUtil</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
  	* 全角转半角
  	*
  	* @param input 输入字符串
  	* @return 半角字符串
  	*/</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">toDbcCase</span><span class="token punctuation">(</span><span class="token class-name">String</span> input<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> c <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> c<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'\u3000'</span> <span class="token operator">||</span> c<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'\ue40c'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        c<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">' '</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token string">'\uFF00'</span> <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token string">'\uFF5F'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        c<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>c<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">65248</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>这里的 <code>\u3000</code> 指的是全角空格，那 <code>\ue40c</code> 是什么？<code>\ue40c</code> 是一个字符，在新闻数据里面也出现了，但是我们并不希望它出现在页面里，所以我们也要把它转换为空格</p> <ol start="2"><li><p><code>generateSQLSuffix</code>：生成每个插入项 <code>(value1, value2...)</code>，一个插入项代表一篇新闻</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">generateSQLSuffix</span><span class="token punctuation">(</span><span class="token class-name">String</span> newsUrl<span class="token punctuation">,</span> <span class="token class-name">String</span> newsDocno<span class="token punctuation">,</span> <span class="token class-name">String</span> newsTitle<span class="token punctuation">,</span> <span class="token class-name">String</span> newsContent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;('&quot;</span> <span class="token operator">+</span> newsUrl <span class="token operator">+</span> <span class="token string">&quot;','&quot;</span> <span class="token operator">+</span> newsDocno <span class="token operator">+</span> <span class="token string">&quot;','&quot;</span> <span class="token operator">+</span> newsTitle <span class="token operator">+</span> <span class="token string">&quot;','&quot;</span> <span class="token operator">+</span> newsContent <span class="token operator">+</span> <span class="token string">&quot;'),&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="3"><li><code>insertNews</code>：插入新闻，这里用了批处理的方式，但是其实我们并没有用批处理，所以可以缓存executeUpdate，但是批处理也能用，只不过变成了一次批处理插入一条很长的语句罢了</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">insertNews</span><span class="token punctuation">(</span><span class="token class-name">PreparedStatement</span> ps<span class="token punctuation">,</span> <span class="token class-name">String</span> sqlPrefix<span class="token punctuation">,</span> <span class="token class-name">StringBuilder</span> sqlSuffix<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
  ps<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span>sqlPrefix <span class="token operator">+</span> sqlSuffix<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> sqlSuffix<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ps<span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ol> <p>到此，逻辑编写完毕</p> <h3 id="_2、完整代码"><a href="#_2、完整代码" class="header-anchor">#</a> 2、完整代码</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>main</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">DatabaseUtil</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">FileUtil</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">NewsUtil</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 处理新闻数据导入到数据库
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HandleImportNews</span> <span class="token punctuation">{</span>
  <span class="token comment">// 插入新闻</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">insertNews</span><span class="token punctuation">(</span><span class="token class-name">PreparedStatement</span> ps<span class="token punctuation">,</span> <span class="token class-name">String</span> sqlPrefix<span class="token punctuation">,</span> <span class="token class-name">StringBuilder</span> sqlSuffix<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
    ps<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span>sqlPrefix <span class="token operator">+</span> sqlSuffix<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> sqlSuffix<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ps<span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// 生成每个插入项</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">generateSQLSuffix</span><span class="token punctuation">(</span><span class="token class-name">String</span> newsUrl<span class="token punctuation">,</span> <span class="token class-name">String</span> newsDocno<span class="token punctuation">,</span> <span class="token class-name">String</span> newsTitle<span class="token punctuation">,</span> <span class="token class-name">String</span> newsContent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;('&quot;</span> <span class="token operator">+</span> newsUrl <span class="token operator">+</span> <span class="token string">&quot;','&quot;</span> <span class="token operator">+</span> newsDocno <span class="token operator">+</span> <span class="token string">&quot;','&quot;</span> <span class="token operator">+</span> newsTitle <span class="token operator">+</span> <span class="token string">&quot;','&quot;</span> <span class="token operator">+</span> newsContent <span class="token operator">+</span> <span class="token string">&quot;'),&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">handleImportNews</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取文件流</span>
    <span class="token class-name">BufferedReader</span> br <span class="token operator">=</span> <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">getBufferReader</span><span class="token punctuation">(</span><span class="token string">&quot;F:\\news_data\\news_origin_data.dat&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gbk&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 获取数据库连接</span>
    <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DatabaseUtil</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">PreparedStatement</span> ps <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 定义数据库插入语句前缀和后缀</span>
    <span class="token class-name">String</span> sqlPrefix <span class="token operator">=</span> <span class="token string">&quot;insert into article(url, docno, title, content) values&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">StringBuilder</span> sqlSuffix <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 行号</span>
    <span class="token keyword">int</span> lineNumber <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// 存放每篇新闻</span>
    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> news <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 存放每次读取的一行内容</span>
    <span class="token class-name">String</span> line <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 逐行扫描新闻</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>line <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 赋值到临时的数组</span>
      news<span class="token punctuation">[</span>lineNumber<span class="token operator">++</span> <span class="token operator">%</span> <span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> line<span class="token punctuation">;</span>

      <span class="token comment">// 每六条进行一次判断</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>lineNumber <span class="token operator">%</span> <span class="token number">6</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> newsTitle <span class="token operator">=</span> <span class="token class-name">NewsUtil</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span>news<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;contenttitle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> newsContent <span class="token operator">=</span> <span class="token class-name">NewsUtil</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span>news<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 新闻标题或内容是否都不为空或空格</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>newsTitle<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> newsContent<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token class-name">String</span> newsUrl <span class="token operator">=</span> <span class="token class-name">NewsUtil</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span>news<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token class-name">String</span> newsDocno <span class="token operator">=</span> <span class="token class-name">NewsUtil</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span>news<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;docno&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          sqlSuffix<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">generateSQLSuffix</span><span class="token punctuation">(</span>newsUrl<span class="token punctuation">,</span> newsDocno<span class="token punctuation">,</span> newsTitle<span class="token punctuation">,</span> newsContent<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">// 每1000条</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>lineNumber <span class="token operator">%</span> <span class="token number">1000</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">insertNews</span><span class="token punctuation">(</span>ps<span class="token punctuation">,</span> sqlPrefix<span class="token punctuation">,</span> sqlSuffix<span class="token punctuation">)</span><span class="token punctuation">;</span>
            sqlSuffix <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// 读取下一行</span>
      line <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 剩余不足1000条数据也要插入</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>sqlSuffix<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">insertNews</span><span class="token punctuation">(</span>ps<span class="token punctuation">,</span> sqlPrefix<span class="token punctuation">,</span> sqlSuffix<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 回收资源</span>
    <span class="token class-name">DatabaseUtil</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> ps<span class="token punctuation">,</span> connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">closeBufferReader</span><span class="token punctuation">(</span>br<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token keyword">long</span> startTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;开始计时...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">handleImportNews</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;插入完成，耗时&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> startTime<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;ms&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br></div></div><p>运行main方法即可</p> <h3 id="_3、运行结果"><a href="#_3、运行结果" class="header-anchor">#</a> 3、运行结果</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>开始计时<span class="token punctuation">..</span>.
插入完成，耗时54731ms
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>总计插入 <code>129,8155</code> 条数据，耗时<code>54</code>秒，写入速度大概在每秒40兆，嗯...这速度还阔以一分钟就把一百万条数据插入了~ 经过我的多次测试，一般在一分钟左右，不过，不同机器表现可能不一致。这样的速度确实还可以。</p> <h2 id="四、编写检索实验-根据关键词检索相关新闻"><a href="#四、编写检索实验-根据关键词检索相关新闻" class="header-anchor">#</a> 四、编写检索实验（根据关键词检索相关新闻）</h2> <p><code>main</code> 包下新建 <code>SearchNewsByKeyWordTest</code> 类，在 <code>main</code> 方法中编写基本逻辑
逻辑比较简单，都是基本操作，数据库检索采用模糊查询的方式，文件检索则是扫描完一篇新闻进行一次判断</p> <h3 id="main方法编写大体逻辑"><a href="#main方法编写大体逻辑" class="header-anchor">#</a> main方法编写大体逻辑</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SearchNewsByKeyWordTest</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// 0、定义关键词</span>
    <span class="token class-name">String</span> keyword <span class="token operator">=</span> <span class="token string">&quot;NBA&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;关键词是：&quot;</span> <span class="token operator">+</span> keyword<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 1、测试在数据库中查找</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;1、开始执行SQL查询：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">long</span> startTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">testSearchBySQL</span><span class="token punctuation">(</span>keyword<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;耗时&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> startTime<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;毫秒&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2、测试在文件中查找</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;2、开始执行文件遍历查询：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    startTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">testSearchByFile</span><span class="token punctuation">(</span>keyword<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;耗时&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> startTime<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;毫秒&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_1、测试在数据库中查找"><a href="#_1、测试在数据库中查找" class="header-anchor">#</a> 1、测试在数据库中查找</h3> <p>直接执行模糊查询语句即可</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testSearchBySQL</span><span class="token punctuation">(</span><span class="token class-name">String</span> keyword<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
  <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DatabaseUtil</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select count(*) from article where title like '%&quot;</span> <span class="token operator">+</span> keyword <span class="token operator">+</span> <span class="token string">&quot;%' or content like '%&quot;</span> <span class="token operator">+</span> keyword <span class="token operator">+</span> <span class="token string">&quot;%'&quot;</span><span class="token punctuation">;</span>
  <span class="token class-name">PreparedStatement</span> ps <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> ps<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;共&quot;</span> <span class="token operator">+</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;条结果&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token class-name">DatabaseUtil</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">,</span> ps<span class="token punctuation">,</span> connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_2、测试在文件中查找"><a href="#_2、测试在文件中查找" class="header-anchor">#</a> 2、测试在文件中查找</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testSearchByFile</span><span class="token punctuation">(</span><span class="token class-name">String</span> keyword<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获取文件流</span>
  <span class="token class-name">BufferedReader</span> br <span class="token operator">=</span> <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">getBufferReader</span><span class="token punctuation">(</span><span class="token string">&quot;F:\\news_data\\news_origin_data.dat&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gbk&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">int</span> lineNumber <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> matchingNumber <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> title <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> content <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> line <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>line <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    lineNumber<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token comment">// 读取标题</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>lineNumber <span class="token operator">%</span> <span class="token number">6</span> <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      title <span class="token operator">=</span> line<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 读取内容</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>lineNumber <span class="token operator">%</span> <span class="token number">6</span> <span class="token operator">==</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      content <span class="token operator">=</span> line<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 每6行进行一次检索</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>lineNumber <span class="token operator">%</span> <span class="token number">6</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 获取经过处理的标题和内容</span>
      <span class="token class-name">String</span> newsTitle <span class="token operator">=</span> <span class="token class-name">NewsUtil</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> <span class="token string">&quot;contenttitle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">String</span> newsContent <span class="token operator">=</span> <span class="token class-name">NewsUtil</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 判断标题和内容是否为空</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>newsTitle<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>newsContent<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 把标题和内容拼接在一起判断</span>
        <span class="token class-name">String</span> searchText <span class="token operator">=</span> newsTitle <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span>  newsContent<span class="token punctuation">;</span>
        <span class="token comment">// 如果包含关键词则计数器增1</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>searchText<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>keyword<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          matchingNumber<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    line <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;共&quot;</span> <span class="token operator">+</span> matchingNumber <span class="token operator">+</span> <span class="token string">&quot;条结果&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">closeBufferReader</span><span class="token punctuation">(</span>br<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h3 id="_3、测试结果"><a href="#_3、测试结果" class="header-anchor">#</a> 3、测试结果</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>关键词是：NBA
<span class="token number">1</span>、开始执行SQL查询：
共7130条结果
耗时6502毫秒
<span class="token number">2</span>、开始执行文件遍历查询：
共6977条结果
耗时15685毫秒
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>在这里为什么结果数不一样呢，而且，这个问题在英文中出现，那么关键英文有什么特性呢？
那就是大小写的差别，在数据库那里你搜索NBA，他会把包含nba，Nba，NBa...等等各种NBA大小写的排列组合结果给搜索出来，因此我们怎么搞？
我们可以在匹配的时候，把新闻标题内容全转为大写和关键词全转为大写来解决这个问题
下面是解决后的代码，关键位置我会标出</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 每6行进行一次检索</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>lineNumber <span class="token operator">%</span> <span class="token number">6</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取经过处理的标题和内容</span>
    <span class="token class-name">String</span> newsTitle <span class="token operator">=</span> <span class="token class-name">NewsUtil</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> <span class="token string">&quot;contenttitle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> newsContent <span class="token operator">=</span> <span class="token class-name">NewsUtil</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 判断标题和内容是否为空</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>newsTitle<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>newsContent<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 把标题和内容拼接在一起判断</span>
        <span class="token class-name">String</span> searchText <span class="token operator">=</span> <span class="token punctuation">(</span>newsTitle <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span>  newsContent<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;-- 改这里</span>
        <span class="token comment">// 如果包含关键词则计数器增1</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>searchText<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>keyword<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// &lt;-- 改这里</span>
            matchingNumber<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>再次单独对它测试：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>关键词是：NBA
2、开始执行文件遍历查询：
共7130条结果
耗时23252毫秒
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>现在没问题了</p> <hr> <h2 id="五、目录结构"><a href="#五、目录结构" class="header-anchor">#</a> 五、目录结构</h2> <img src="https://img-blog.csdnimg.cn/4b82e180d1dc4dcca2c92ce0ac69e5cd.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2NDkxNTQ5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" style="zoom:80%;"> <h2 id="六、源码参考注意事项"><a href="#六、源码参考注意事项" class="header-anchor">#</a> 六、源码参考注意事项</h2> <p>由于我的项目已经把idea的配置 <code>.idea</code> 目录和 <code>.iml</code> 删除了，所以大家打开我的代码需要自行再配置 <code>jdk</code>，当然 <code>idea</code> 会提示安装 <code>jdk</code> 的，你选择已有的就行，然后 <code>lib</code> 目录也需要右键添加为库，还有项目的语言级别等，建议大家还是直接跟着教程步骤来自己敲~
<img src="https://img-blog.csdnimg.cn/f205f269eaac43369414fbdf40dd2b21.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2NDkxNTQ5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" style="zoom:80%;"></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/nomoe/assets/js/app.b0634cdc.js" defer></script><script src="/nomoe/assets/js/2.e531c252.js" defer></script><script src="/nomoe/assets/js/8.f6d4234c.js" defer></script>
  </body>
</html>
